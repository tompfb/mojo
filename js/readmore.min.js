;(function ($) {
  jQuery.readMore = function (options) {
    var settings = $.extend({ selector: '.read-more' }, options)
    $(settings.selector).readMore(options)
  }
  $.fn.readMore = function (options) {
    var settings = $.extend(
      { 
        previewHeight: 120,
        expandTrigger: '.prompt',
        fadeColor1: 'rgba(255,255,255,0)',
        fadeColor2: 'rgba(255,255,255,1)',
        marginTopOnClick: '7em' // Add marginTopOnClick option with default value
      },
      options
    )
    return this.each(function () {
      var $container = $(this)
      var $expand = $container.find(settings.expandTrigger)
      var totalHeight = $container[0].scrollHeight
      if (totalHeight <= $container.height()) {
        $container.css('max-height', 'none')
        $expand.hide()
      } else {
        $container.css('max-height', settings.previewHeight + 'px')
        $expand.css('padding-top', settings.previewHeight / 2 + 'px')
      }
      $expand.css({
        'background-image':
          'linear-gradient(to bottom, ' +
          settings.fadeColor1 +
          ', ' +
          settings.fadeColor2 +
          ')'
      })
      $expand.on('click', function () {
        $container
          .css({
            height: $container.height(),
            'max-height': 99999,
            'margin-top': settings.marginTopOnClick
          }) // Add margin-top setting
          .animate({ height: totalHeight })
        $expand.fadeOut()
        return !1
      })
    })
  }
})(jQuery)
